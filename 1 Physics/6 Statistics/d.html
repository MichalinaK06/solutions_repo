<!DOCTYPE html>
<html>
<head>
    <title>Estimating π with Monte Carlo (Circle Method)</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        canvas { border: 1px solid #000; margin: 20px auto; display: block; }
        #piEstimate { font-size: 24px; font-weight: bold; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Estimating π using Monte Carlo (Circle Method)</h1>
    <canvas id="monteCarloCanvas" width="500" height="500"></canvas>
    <div>
        <button id="startButton">Start Simulation</button>
        <button id="resetButton">Reset</button>
        <button id="fastButton">Fast Mode (100x)</button>
    </div>
    <div>Points: <span id="pointCount">0</span></div>
    <div>Estimated π: <span id="piEstimate">0</span></div>
    <div>Actual π: 3.141592653589793</div>
    <div>Error: <span id="error">0</span>%</div>

    <script>
        const canvas = document.getElementById("monteCarloCanvas");
        const ctx = canvas.getContext("2d");
        const pointCountDisplay = document.getElementById("pointCount");
        const piEstimateDisplay = document.getElementById("piEstimate");
        const errorDisplay = document.getElementById("error");
        const startButton = document.getElementById("startButton");
        const resetButton = document.getElementById("resetButton");
        const fastButton = document.getElementById("fastButton");

        const width = canvas.width;
        const height = canvas.height;
        const centerX = width / 2;
        const centerY = height / 2;
        const radius = width / 2;

        let totalPoints = 0;
        let pointsInCircle = 0;
        let animationId = null;
        let fastMode = false;

        // Draw the initial circle
        function drawCircle() {
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = "#000";
            ctx.stroke();
        }

        function reset() {
            totalPoints = 0;
            pointsInCircle = 0;
            pointCountDisplay.textContent = "0";
            piEstimateDisplay.textContent = "0";
            errorDisplay.textContent = "0";
            ctx.clearRect(0, 0, width, height);
            drawCircle();
        }

        function simulatePoint() {
            for (let i = 0; i < (fastMode ? 100 : 1); i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                
                const distance = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);
                const isInside = distance <= radius;
                
                ctx.fillStyle = isInside ? "rgba(0, 100, 255, 0.5)" : "rgba(255, 50, 50, 0.5)";
                ctx.fillRect(x, y, 2, 2);
                
                totalPoints++;
                if (isInside) pointsInCircle++;
                
                const piEstimate = 4 * (pointsInCircle / totalPoints);
                const error = Math.abs(piEstimate - Math.PI) / Math.PI * 100;
                
                pointCountDisplay.textContent = totalPoints.toLocaleString();
                piEstimateDisplay.textContent = piEstimate.toFixed(6);
                errorDisplay.textContent = error.toFixed(4);
            }
            
            if (totalPoints < 100000) {
                animationId = requestAnimationFrame(simulatePoint);
            }
        }

        startButton.addEventListener("click", () => {
            if (!animationId) {
                simulatePoint();
            }
        });

        resetButton.addEventListener("click", () => {
            cancelAnimationFrame(animationId);
            animationId = null;
            reset();
        });

        fastButton.addEventListener("click", () => {
            fastMode = !fastMode;
            fastButton.textContent = fastMode ? "Fast Mode (100x)" : "Normal Mode";
        });

        reset();
    </script>
</body>
</html>